
    <%- include('./partials/header.ejs') %>
    <div class="jumbotron" style="padding: 10px;">
        <h1 class="display-4">Todos List
          <% if(isLabelSelected){ %>
            for <%= labels[0].name %> 
          <% } %>
        </h1>
        <hr class="my-4">
        <p class="lead" style="display: inline;">Manage your Todos here </p>
        <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#todosPopup">
          <i class="fa fa-plus mr-2" aria-hidden="true"></i>New Todo
          </button>       
      </div>

      <ul class="list-group">
        <% todos.forEach(obj => { %>
            <li onclick="todoClicked(event) " class = "todos list-group-item list-group-item-action row <%= obj.priority == 5? 'list-group-item-danger' : obj.priority == 4?
            'list-group-item-warning' : obj.priority == 3? 'list-group-item-info' : obj.priority == 2? 'list-group-item-success': 'list-group-item-light'  %>" >
                <div class="col-lg-11" style="padding-left: 0;"><%- obj.title %> </div>
                <div class="col-lg-1 col-sm-2" style="padding-right: 0; justify-content: space-between; display: flex; padding-left: 0;">
                  <a href="/todos/<%= obj._id %>/edit"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
                  <% if(obj.status == 0){ %>
                    <form action="/inProgress" method="post" style="display: inline;">
                      <input type="text" name="todoId" value="<%= obj._id %>" style="display: none;">
                      <input type="text" name="status" value="1" style="display: none;">
                      <button class="deleteButton" style="background: none; padding: 0; border: none;" type="submit">
                        <i class="fa fa-arrow-right" aria-hidden="true"></i>
                      </button>
                    </form>  
                  <% } %>
                  <form action="/todos/<%= obj._id %>?_method=DELETE" method="post" style="display: inline;">
                    <button class="deleteButton" style="background: none; padding: 0; border: none;" type="submit">
                     <i class="fa fa-trash" aria-hidden="true"></i>
                    </button>
                  </form>
                </div>
                <% if(obj.description){ %>
                  <div class="col-12" style="margin-top: 8px; border: 1px solid black; border-radius: 3px;"><%= obj.description %></div>
                <% } %> 
            </li>
        <% }) %>
      </ul>

     

    <%- include('./partials/footer.ejs') %>
  
  <!-- Modal -->
  <div class="modal fade" id="todosPopup" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalCenterTitle">New Todo</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form class="form " action="\todos" method="POST" id="todosForm">
              <div class="form-group">
                <label for="task">Title</label>
                <input type="text" class="form-control" name= "title">
              </div>
              <div class="form-group">
                <label for="task">Description</label>
                <input type="text" class="form-control" name= "description">
              </div>
              <div class="form-group">
                <label for="task">Priority</label>
                <% for(let i = 1; i <= 5;i++){  %>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id = "<%= i %>" name="priority" value="<%= i %>" <%= i == 1 ? "checked" : "" %>>
                    <label class="form-check-label" for="<%= i %>"><%= i %></label>
                  </div>
                <% }   %>
              </div>
            
              <div class="form-group">
                <label for="label">Change Label</label>
                <select class="form-control" name="label">
                  <% labels.forEach(label => { %>
                      <option value="<%= label._id %>" <%= isLabelSelected? "selected" : "" %> ><%= label.name %></option>
                  <% }) %>
                </select>
              </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" onClick = "submitForm()">Create</button>
        </div>
      </div>
    </div>
  </div>