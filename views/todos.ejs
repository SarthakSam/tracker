
    <%- include('./partials/header.ejs') %>

    <div class="jumbotron" style="padding: 10px;">
        <h1 class="display-4">Todos List</h1>
        <hr class="my-4">
        <p class="lead">Manage your Todos here</p>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#todosPopup">
          <i class="fa fa-plus" aria-hidden="true"></i>New Todo
          </button>       
      </div>

      <ul class="list-group">
        <% todos.forEach(obj => { %>
            <li class="list-group-item"><%- obj.description %>  <i class="fa fa-tags" aria-hidden="true"></i> 
              <a href="/todos/<%= obj._id %>/edit"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
              
              <form action="/todos/<%= obj._id %>?_method=DELETE" method="post">
                <button class="deleteButton" style="background: none; padding: 0; border: none;" type="submit">
                  <i class="fa fa-trash" aria-hidden="true"></i>
                </button>
              </form>
            </li>
        <% }) %>
      </ul>

     

    <%- include('./partials/footer.ejs') %>
  
  <!-- Modal -->
  <div class="modal fade" id="todosPopup" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalCenterTitle">New Todo</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form class="form " action="\todos" method="POST" id="todosForm">
              <div class="form-group">
                <label for="task">Description</label>
                <input type="text" class="form-control" name= "description">
              </div>
              <div class="form-group">
                <label for="task">Priority</label>
                <% for(let i = 1; i <= 5;i++){  %>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id = "<%= i %>" name="priority" value="<%= i %>">
                    <label class="form-check-label" for="<%= i %>"><%= i %></label>
                  </div>
                <% }   %>
              </div>
            
              <div class="form-group">
                <label for="label">Change Label</label>
                <select class="form-control" name="label">
                  <!-- <option value="">Select</option> -->
                  <% if(labels){ %>
                  <% labels.forEach(label => { %>
                      <option value="<%= label._id %>"><%= label.name %></option>
                  <% }) %>
                  <% } %>
                </select>
              </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" onClick = "submitForm()">Create</button>
        </div>
      </div>
    </div>
  </div>